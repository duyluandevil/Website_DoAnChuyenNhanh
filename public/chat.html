<!DOCTYPE html>
<html lang="en">

    <style>
        @font-face {
        font-family: SVN;
        src: url(assets/fonts/SVN-Determination\ Sans.otf);
        }
    </style>

  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap" rel="stylesheet">

    <title>Chiến</title>
<!--

TemplateMo 548 Training Studio

https://templatemo.com/tm-548-training-studio

-->
    <!-- Additional CSS Files -->
    <link rel="stylesheet" type="text/css" href="assets/css/bootstrap.min.css">

    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.css">

    <link rel="stylesheet" href="assets/css/templatemo-training-studio.css">
    <link rel="stylesheet" href="assets/css/styleChat.css">

    </head>
    
    <body>
    
    <!-- ***** Preloader Start ***** -->
    <div id="js-preloader" class="js-preloader">
      <div class="preloader-inner">
        <span class="dot"></span>
        <div class="dots">
          <span></span>
          <span></span>
          <span></span>
        </div>
      </div>
    </div>
    <!-- ***** Preloader End ***** -->
    
    
    <!-- ***** Header Area Start ***** -->
    <header class="header-area header-sticky">
        <div class="container">
            <div class="row">
                <div class="col-12">
                    <nav class="main-nav">
                        <!-- ***** Logo Start ***** -->
                        <a href="index.html" class="logo" style="font-family: SVN;">CHIEN<em> DACN</em></a>
                        <!-- ***** Logo End ***** -->
                        <!-- ***** Menu Start ***** -->
                        <ul class="nav">
                            <li class="scroll-to-section"><a href="index.html" style="font-family: SVN;">Trang chủ</a></li>
                            <li class="scroll-to-section"><a href="chat.html" style="font-family: SVN;">Tán gẫu</a></li>
                            <li class="scroll-to-section"><a href="infomation.html" style="font-family: SVN;">Thông tin</a></li>
                            <li class="scroll-to-section"><a href="contact.html" style="font-family: SVN;">Liên hệ</a></li> 
                            <li class="main-button"><a href="Login.html" style="font-family: SVN;">Đăng nhập</a></li>
                        </ul>        
                        <a class='menu-trigger'>
                            <span>Menu</span>
                        </a>
                        <!-- ***** Menu End ***** -->
                    </nav>
                </div>
            </div>
        </div>
    </header>
    <!-- ***** Header Area End ***** -->

    <!-- ***** Main Banner Area Start ***** -->
    <div class="main-banner" id="top">
        <img src="assets/images/bia.png" id="bg-video">
        <div class="video-overlay header-text">
            <div class="caption" style="text-align:left">             
                <div class="chat-container">
                    <div class="chat-header">
                        <div class="logo">
                            <i></i>
                            <h3>Chat</h3>
                        </div>
                        <p id="your-name">Tên của bạn</p>
                    </div>
                
                <!--  -->
                    <div class ="chat-section">
                        <div class="main-wrapper">
                            <div class="chat-content">
                                <div class="message">
                                    <div class="mesage-row other-message">
                                        <!-- <div class="message-title">
                                            <span>Dev</span>
                                        </div>
                                        <div class="message-text">
                                            abc
                                        </div>
                                        <div class="message-time">
                                            9/12
                                        </div> -->
                                    </div>
                                    <div style="text-align:right;" class="mesage-row you-message">
                                        <!-- <div class="message-title">
                                            <span>User 01</span>
                                        </div>
                                        <div class="message-text">
                                            abc
                                        </div>
                                        <div class="message-time">
                                            9/12
                                        </div> -->
                                    </div>
                                </div>
                            </div>
                            <!--  -->
                            <form class="msg-tex">
                                <input type="text" name="msg" id="msg" placeholder="Nhập nội dung..." autocomplete="off">
                                <button id="btn-send"> 
                                    <i class="glyphicon">Send</i>
                                </button>
        
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- ***** Main Banner Area End ***** -->

    <!-- chatbox -->
    
   <!-- end chatbox -->
    
    <!-- ***** Footer Start ***** -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <p>Copyright &copy; 2021 SieuCapVipProLQ                   
                   </p>                  
                    <!-- You shall support us a little via PayPal to info@templatemo.com -->                 
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="assets/js/jquery-2.1.0.min.js"></script>

    <!-- Bootstrap -->
    <script src="assets/js/popper.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>

    <!-- Plugins -->
    <script src="assets/js/scrollreveal.min.js"></script>
    <script src="assets/js/waypoints.min.js"></script>
    <script src="assets/js/jquery.counterup.min.js"></script>
    <script src="assets/js/imgfix.min.js"></script> 
    <script src="assets/js/mixitup.js"></script> 
    <script src="assets/js/accordions.js"></script>
    
    <!-- Global Init -->
    <script src="assets/js/custom.js"></script>

  </body>

  <script src="/socket.io/socket.io.js"></script>
  <script> 
        const socket = io();
        
        const msgText = document.querySelector("#msg")
        const btnSend = document.querySelector("#btn-send")
        const chatBox = document.querySelector(".chat-content")
        const displayMsg = document.querySelector(".message")

        let name;
        do{
            name= prompt('Xưng danh đi quỵ huynh đài')
        }while(!name)

        //Set tên
        document.querySelector("#your-name").textContent = name;
        msgText.focus()

        btnSend.addEventListener('click', function(e){
            e.preventDefault();
            if(msgText.value !='')
            {
                sendMsg(msgText.value)
                msgText.value = '';
                msgText.focus()
                chatBox.scrollTop = chatBox.scrollHeight;
            }
        })

        const sendMsg = message =>{
            let msg ={
                user: name,
                message: message.trim()
            }

            display(msg, 'you-message')
            socket.emit('sendMessage', msg)
        }

        socket.on('user-chat', function(data){
            display(data, 'other-message')
            chatBox.scrollTop = chatBox.scrollHeight;
            
            })

        const display = (msg, type) =>{
            console.log(msg);
            console.log(msg);
            const msgDiv = document.createElement('div')
            let className = type
            msgDiv.classList.add(className, 'message-row')
            let times = new Date().toLocaleTimeString()

            let innerText = `
                                        <div class="message-title">
                                            <span>${msg.user}</span>
                                        </div>
                                        <div class="message-text">
                                            ${msg.message}
                                        </div>
                                        <div class="message-time">
                                            ${times}
                                        </div>
            `;
            msgDiv.innerHTML = innerText;
            displayMsg.appendChild(msgDiv)
        }
  </script>

</html>